# MariaDB Репликация: Скрипты настройки Master и Slave

## Описание

В данном репозитории представлены два bash-скрипта для автоматизации настройки репликации MariaDB:
- **setup_master.sh** — конфигурирует сервер как мастер, создает пользователя для репликации, включает бинарные логи и подготавливает данные для слейва.
- **setup_slave.sh** — конфигурирует сервер как слейв, подключает его к мастеру и запускает процесс репликации.

## Требования

- MariaDB установлен и запущен на обоих серверах (master и slave).
- Доступ root к MariaDB на обоих серверах.
- SSH-доступ между серверами для передачи резервной копии.

## Порядок настройки

### 1. Настройка Master-сервера

1. Отредактируйте переменные в `setup_master.sh` при необходимости (IP-адрес слейва, пароли и имя базы).
2. Запустите скрипт на мастер-сервере:
   ```bash
   sudo ./setup_master.sh
   ```
3. После выполнения скрипта сохраните значения `File` и `Position` из вывода `SHOW MASTER STATUS` — они понадобятся для настройки слейва.
4. Передайте резервную копию базы данных на слейв:
   ```bash
   scp /tmp/master_backup.sql <USER>@<SLAVE_IP>:/tmp/
   ```

### 2. Настройка Slave-сервера

1. Отредактируйте переменные в `setup_slave.sh` (IP мастера, пароли, имя бинарного лога и позицию — используйте значения из мастера).
2. Восстановите резервную копию базы данных:
   ```bash
   mysql -u root -p < /tmp/master_backup.sql
   ```
3. Запустите скрипт на слейв-сервере:
   ```bash
   sudo ./setup_slave.sh
   ```
4. Проверьте статус репликации — скрипт выведет результат команды `SHOW SLAVE STATUS\G`.
